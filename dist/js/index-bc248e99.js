import{E as p,m as z,p as C,q as I,w as $,k as B,x as q,r as A,n as R}from"./element-plus-28eabd23.js";import{b as Z}from"./vue-router-3c7b10bc.js";import{F,G as x,H as N,I as M}from"./@element-plus-51afdc8f.js";import{s as P}from"./index-615793b3.js";import{i as T}from"./index-5de9982a.js";import{d as D,e as v,V as G,l as H,o as L,c as Q,a as i,U as t,M as o,u,a3 as f,Q as S}from"./@vue-293b3db8.js";import"./dayjs-6997e6a6.js";import"./copy-to-clipboard-55affb02.js";import"./toggle-selection-93f4ad84.js";import"./lodash-es-327b7962.js";import"./async-validator-dee29e8b.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./@vueuse-9d87eeea.js";import"./pinia-b73abff6.js";import"./vue-demi-71ba0ef2.js";import"./axios-b5ee139b.js";import"./nprogress-b52be870.js";import"./@codemirror-b3ba2dcc.js";import"./@lezer-5d82abd9.js";import"./crelt-7bb88e1d.js";import"./@marijn-45184d7f.js";import"./style-mod-ab9c37a6.js";import"./w3c-keyname-9fb136d3.js";const j={style:{"text-align":"center",margin:"0 20px"}},J={style:{"margin-top":"50px"}},K={style:{"margin-top":"80px"}},O={style:{"margin-top":"20px"}},he=D({__name:"index",setup(W){const n=v(0),g=v(),y=Z(),r=G({username:"",password:"",password_repeat:"",email:"",code:""}),V={username:[{validator:(s,e,l)=>{e===""?l(new Error("请输入用户名")):/[a-zA-Z0-9\u4e00-\u9fa5]+$/.test(e)?l():l(new Error("用户名不能包含特殊字符，只能是中/英文"))},trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码的长度必须在 6-20 个字符之间",trigger:["blur","change"]}],password_repeat:[{validator:(s,e,l)=>{e===""?l(new Error("请再次输入密码")):e!==r.password?l(new Error("两次输入的密码不一致")):l()},trigger:["blur","change"]}],email:[{required:!0,message:"请输入邮件地址",trigger:"blur"},{type:"email",message:"请输入合法的电子邮件地址",trigger:["blur","change"]}],code:[{required:!0,message:"请输入获取的验证码",trigger:"blur"}]};function E(){_?(n.value=60,P(r.email,"register").then(s=>{if(s.code===200){p.success(`验证码已发送到邮箱：${r.email}，请注意查收`);const e=setInterval(()=>{n.value===0?clearInterval(e):n.value--},1e3)}else p.warning(s.msg),n.value=0})):p.warning("请输入正确的电子邮件")}const _=H(()=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r.email));function b(){g.value.validate(s=>{s?T(r).then(e=>{e.code===200?(p.success("注册成功，欢迎加入我们"),y.push("/login")):p.warning(e.msg)}):p.warning("请完整填写注册表单内容")})}return(s,e)=>{const l=z,d=C,m=I,w=$,c=B,h=q,U=A,k=R;return L(),Q("div",j,[e[9]||(e[9]=i("div",{style:{"margin-top":"100px"}},[i("div",{style:{"font-size":"25px","font-weight":"bold"}},"注册新用户"),i("div",{style:{"font-size":"14px",color:"grey","margin-top":"1rem"}},"欢迎注册我们的学习平台，请在下方填写相关信息")],-1)),i("div",J,[t(U,{model:r,rules:V,ref_key:"formRef",ref:g},{default:o(()=>[t(m,{prop:"username"},{default:o(()=>[t(d,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=a=>r.username=a),maxlength:"10",type:"text",placeholder:"用户名"},{prefix:o(()=>[t(l,null,{default:o(()=>[t(u(F))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(m,{prop:"password"},{default:o(()=>[t(d,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=a=>r.password=a),maxlength:"20",type:"password",placeholder:"密码"},{prefix:o(()=>[t(l,null,{default:o(()=>[t(u(x))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(m,{prop:"password_repeat"},{default:o(()=>[t(d,{modelValue:r.password_repeat,"onUpdate:modelValue":e[2]||(e[2]=a=>r.password_repeat=a),maxlength:"20",type:"password",placeholder:"重复密码"},{prefix:o(()=>[t(l,null,{default:o(()=>[t(u(x))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(m,{prop:"email"},{default:o(()=>[t(d,{modelValue:r.email,"onUpdate:modelValue":e[3]||(e[3]=a=>r.email=a),type:"email",placeholder:"电子邮件地址"},{prefix:o(()=>[t(l,null,{default:o(()=>[t(u(N))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(m,{prop:"code"},{default:o(()=>[t(h,{gutter:10,style:{width:"100%"}},{default:o(()=>[t(w,{span:17},{default:o(()=>[t(d,{modelValue:r.code,"onUpdate:modelValue":e[4]||(e[4]=a=>r.code=a),maxlength:"6",placeholder:"请输入验证码"},{prefix:o(()=>[t(l,null,{default:o(()=>[t(u(M))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(w,{span:5},{default:o(()=>[t(c,{type:"success",onClick:E,disabled:!_.value||n.value!=0},{default:o(()=>[f(S(n.value>0?`请稍后 ${n.value} 秒`:"获取验证码"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),i("div",K,[t(c,{onClick:b,type:"warning",style:{width:"270px"},plain:""},{default:o(()=>[...e[6]||(e[6]=[f("立即注册",-1)])]),_:1})]),i("div",O,[e[8]||(e[8]=i("span",{style:{"font-size":"14px","line-height":"15px",color:"grey"}},"已有账号?",-1)),t(k,{style:{translate:"0 -1px"},onClick:e[5]||(e[5]=a=>s.$router.push("/login"))},{default:o(()=>[...e[7]||(e[7]=[f("立即登录",-1)])]),_:1})])])}}});export{he as default};
