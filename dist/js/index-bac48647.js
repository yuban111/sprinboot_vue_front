import{i as N,a as S,u as I,c as W,b as $,d as b,_ as R}from"./index-c027236e.js";import{_ as T}from"./index-5de9982a.js";import{E as l,n as A,e as J,h as P}from"./element-plus-28eabd23.js";import{d as Q,e as m,f as U,o as f,c as j,a as n,U as s,M as q,a3 as z,u as o,Q as u,R as d,S as p,L as G,J as H}from"./@vue-293b3db8.js";import{D as K}from"./@element-plus-51afdc8f.js";import{g as O}from"./index-d25c725c.js";import{M as X}from"./md-editor-v3-68fe6554.js";import{c as Y}from"./@vueuse-9d87eeea.js";import{u as Z}from"./vue-router-3c7b10bc.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import"./pinia-b73abff6.js";import"./vue-demi-71ba0ef2.js";import"./axios-b5ee139b.js";import"./nprogress-b52be870.js";import"./copy-to-clipboard-55affb02.js";import"./toggle-selection-93f4ad84.js";import"./@codemirror-b3ba2dcc.js";import"./@lezer-5d82abd9.js";import"./crelt-7bb88e1d.js";import"./@marijn-45184d7f.js";import"./style-mod-ab9c37a6.js";import"./w3c-keyname-9fb136d3.js";import"./dayjs-6997e6a6.js";import"./lodash-es-327b7962.js";import"./async-validator-dee29e8b.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./@vavt-29aad11c.js";import"./medium-zoom-9a5daf0e.js";import"./markdown-it-467cea12.js";import"./mdurl-d7fdfec3.js";import"./uc.micro-2ff9f57e.js";import"./entities-52510f6e.js";import"./linkify-it-c9428ec8.js";import"./punycode.js-c41da3d1.js";import"./markdown-it-image-figures-6b4113de.js";import"./markdown-it-sub-7f11bbf3.js";import"./markdown-it-sup-e798c984.js";import"./lru-cache-d0d3053b.js";const te={class:"user"},oe={class:"detail"},ne={class:"name"},ie={class:"time"},ae={class:"content"},se={class:"container"},le={class:"count"},re=Q({__name:"index",setup(ue){const k=Y(),e=m([]),h=Z(),v=m(!1),i=m(!1),a=m(!1);U(()=>{g()});function g(){O(h.params.id).then(t=>{e.value=t.data[0],v.value=!0,C(),x()})}function C(){N(3,e.value.id).then(t=>{i.value=t.code===200})}function F(){i.value?w():L()}function L(){i.value||I(3,e.value.id).then(t=>{t.code===200?(e.value.likeCount++,i.value=!0,l.success("点赞成功")):(i.value=!1,l.warning(t.msg))})}function w(){i.value&&W(3,e.value.id).then(t=>{t.code===200?(e.value.likeCount--,i.value=!1):(i.value=!0,l.warning(t.msg))})}function x(){S(2,e.value.id).then(t=>{a.value=t.data===!0})}function y(){a.value?M():E()}function E(){a.value||$(2,e.value.id).then(t=>{t.code===200?(e.value.favoriteCount++,a.value=!0,l.success("收藏成功")):(a.value=!1,l.warning(t.msg))})}function M(){a.value&&b(2,e.value.id).then(t=>{t.code===200?(e.value.favoriteCount--,a.value=!1):(a.value=!0,l.warning(t.msg))})}return(t,c)=>{const V=A,_=J,B=P,r=T,D=R;return f(),j("div",null,[n("div",null,[s(V,{icon:o(K),onClick:c[0]||(c[0]=ce=>t.$router.push("/message"))},{default:q(()=>[...c[1]||(c[1]=[z("回到留言列表",-1)])]),_:1},8,["icon"]),s(_)]),n("div",te,[n("span",null,[s(B,{src:o(e).avatar},null,8,["src"])]),n("div",oe,[n("span",ne,u(o(e).nickname),1),n("span",ie,u(o(e).createTime),1)])]),n("div",ae,[s(o(X),{modelValue:o(e).content,theme:o(k)},null,8,["modelValue","theme"])]),n("div",se,[n("div",le,[n("div",null,[s(r,{name:"comments"}),n("span",null,u(o(e).commentCount),1)]),n("div",{onClick:F},[d(s(r,{name:"like"},null,512),[[p,!o(i)]]),d(s(r,{name:"like-selected"},null,512),[[p,o(i)]]),n("span",null,u(o(e).likeCount),1)]),n("div",{onClick:y},[d(s(r,{name:"collection"},null,512),[[p,!o(a)]]),d(s(r,{name:"collection-selected"},null,512),[[p,o(a)]]),n("span",null,u(o(e).favoriteCount),1)])])]),s(_,{"content-position":"left"}),o(v)?(f(),G(D,{key:0,type:2,"like-type":2,"author-id":o(e).userId,"type-id":o(e).id,"is-show-header":!0},null,8,["author-id","type-id"])):H("",!0)])}}});const Oe=ee(re,[["__scopeId","data-v-59a5d4f7"]]);export{Oe as default};
