import{_ as k}from"./index-167a1727.js";import{_ as C}from"./index-5239cda9.js";import{g as T}from"./index-5de9982a.js";import{d as b,e as g,f as L,n as w,o as a,c as i,U as h,M as v,a as r,K as p,aj as y,l as E,Q as d}from"./@vue-293b3db8.js";import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";import"./@vueuse-9d87eeea.js";import"./pinia-b73abff6.js";import"./vue-demi-71ba0ef2.js";import"./axios-b5ee139b.js";import"./nprogress-b52be870.js";import"./copy-to-clipboard-55affb02.js";import"./toggle-selection-93f4ad84.js";import"./element-plus-28eabd23.js";import"./dayjs-6997e6a6.js";import"./lodash-es-327b7962.js";import"./@element-plus-51afdc8f.js";import"./async-validator-dee29e8b.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./vue-router-3c7b10bc.js";import"./@codemirror-b3ba2dcc.js";import"./@lezer-5d82abd9.js";import"./crelt-7bb88e1d.js";import"./@marijn-45184d7f.js";import"./style-mod-ab9c37a6.js";import"./w3c-keyname-9fb136d3.js";const A={class:"timeline"},S={class:"year"},q=["onClick","data-text"],B={class:"content"},I=["src"],D={class:"content-title"},M={class:"content-desc"},F=b({__name:"index",setup(H){function x(o){return o=o.map(e=>(e.articleContent=e.articleContent.replace(/[*#>`~\-\\[\]()\s]|(\n\n)/g,""),e.articleContent=e.articleContent.substring(0,60)+"...",e.createTime=e.createTime.substring(0,10),e)),E(()=>o.reduce((e,s)=>{const t=new Date(s.createTime).getFullYear();return e[t]||(e[t]=[]),e[t].push(s),e},{})).value}const _=g(null),u=g([]);return L(async()=>{await T().then(o=>{u.value=x(o.data)}),await w(()=>{const o=_.value,c=o.querySelectorAll(".item"),e=Array.from(c);e[0].classList.add("item--active"),o.style.backgroundImage=`url(${e[0].querySelector(".img").src})`,window.addEventListener("scroll",()=>{const s=window.pageYOffset;e.forEach((t,l)=>{const n=t.offsetTop,f=t.offsetHeight+t.offsetTop;l===e.length-2&&s>n+t.offsetHeight/2?(e.forEach(m=>m.classList.remove("item--active")),o.style.backgroundImage=`url(${e[e.length-1].querySelector(".img").src})`,e[e.length-1].classList.add("item--active")):s<=f-10&&s>=n&&(o.style.backgroundImage=`url(${t.querySelector(".img").src})`,e.forEach(m=>m.classList.remove("item--active")),t.classList.add("item--active"))})})})}),(o,c)=>{const e=C,s=k;return a(),i("div",null,[h(s,{"only-father-container":""},{banner:v(()=>[h(e,{title:"时间轴",subtitle:"TimeLine"})]),content:v(()=>[r("div",{class:"shell",ref_key:"shellRef",ref:_},[r("div",A,[(a(!0),i(p,null,y(u.value,(t,l)=>(a(),i(p,{key:t.id},[r("div",S,"--"+d(l)+"--",1),(a(!0),i(p,null,y(t,n=>(a(),i("div",{class:"item",onClick:f=>o.$router.push(`/article/${n.id}`),"data-text":n.createTime},[r("div",B,[r("img",{class:"img",src:n.articleCover},null,8,I),r("h2",D,d(n.articleTitle),1),r("p",M,d(n.articleContent),1)])],8,q))),256))],64))),128))])],512)]),_:1})])}}});const me=$(F,[["__scopeId","data-v-b4d0e128"]]);export{me as default};
