import{f as w,l as b,S as h,r as k,_ as N}from"./index-5de9982a.js";import{E as c,m as U,p as C,q as O,v as D,w as A,n as B,x as L,r as M,k as F,e as $}from"./element-plus-28eabd23.js";import{d as P,e as z,V as K,o as q,c as Y,a as r,U as t,M as o,u as s,am as G,a3 as d}from"./@vue-293b3db8.js";import{F as j,G as H}from"./@element-plus-51afdc8f.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";import"./@vueuse-9d87eeea.js";import"./pinia-b73abff6.js";import"./vue-demi-71ba0ef2.js";import"./axios-b5ee139b.js";import"./nprogress-b52be870.js";import"./copy-to-clipboard-55affb02.js";import"./toggle-selection-93f4ad84.js";import"./vue-router-3c7b10bc.js";import"./@codemirror-b3ba2dcc.js";import"./@lezer-5d82abd9.js";import"./crelt-7bb88e1d.js";import"./@marijn-45184d7f.js";import"./style-mod-ab9c37a6.js";import"./w3c-keyname-9fb136d3.js";import"./dayjs-6997e6a6.js";import"./lodash-es-327b7962.js";import"./async-validator-dee29e8b.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";const Q={style:{"text-align":"center",margin:"0 20px"}},W={style:{"margin-top":"50px"}},X={style:{"margin-top":"30px"}},Z={class:"other_login"},ee={style:{"margin-left":"1rem"}},te=P({__name:"index",setup(oe){const _=z(),i={VITE_APP_BASE_API:"/api",VITE_SERVE:"",VITE_FRONTEND_URL:"",VITE_MUSIC_BASE_API:"/wapi",VITE_MUSIC_SERVE:"",VITE_MUSIC_FRONTEND_URL:"",VITE_YIYAN_API:"",VITE_ENABLE_DEV_TOOLSBLOCKER:"true",VITE_USER_NODE_ENV:"production",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},n=K({username:"",password:"",remember:!1}),y={username:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码"}]},I=w();function u(){_.value.validate(a=>{a&&b(n).then(e=>{e.code===200?(h(e.data.token,e.data.expire,n.remember),c.success("登录成功"),k.push("/"),I.getInfo()):c.error(e.msg)})})}return(a,e)=>{const f=U,E=C,p=O,S=D,g=A,m=B,T=L,R=M,V=F,x=$,v=N;return q(),Y("div",Q,[e[12]||(e[12]=r("div",{style:{"margin-top":"150px"}},[r("div",{style:{"font-size":"25px","font-weight":"bold"}},"登录"),r("div",{style:{"font-size":"14px",color:"grey","margin-top":"1rem"}},"用户密码使用键式哈希算法加密，请放心注册")],-1)),r("div",W,[t(R,{model:n,rules:y,ref_key:"formRef",ref:_},{default:o(()=>[t(p,{prop:"username"},{default:o(()=>[t(E,{modelValue:n.username,"onUpdate:modelValue":e[0]||(e[0]=l=>n.username=l),maxlength:"20",type:"text",placeholder:"用户名/邮箱"},{prefix:o(()=>[t(f,null,{default:o(()=>[t(s(j))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(p,{prop:"password"},{default:o(()=>[t(E,{modelValue:n.password,"onUpdate:modelValue":e[1]||(e[1]=l=>n.password=l),type:"password",maxlength:"20",placeholder:"密码",onKeyup:e[2]||(e[2]=G(l=>u(),["enter"]))},{prefix:o(()=>[t(f,null,{default:o(()=>[t(s(H))]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(T,null,{default:o(()=>[t(g,{span:12,style:{"text-align":"left"}},{default:o(()=>[t(p,{prop:"remember"},{default:o(()=>[t(S,{modelValue:n.remember,"onUpdate:modelValue":e[3]||(e[3]=l=>n.remember=l),label:"记住我"},null,8,["modelValue"])]),_:1})]),_:1}),t(g,{span:12,style:{"text-align":"right"}},{default:o(()=>[t(m,{onClick:e[4]||(e[4]=l=>a.$router.push("/reset"))},{default:o(()=>[...e[7]||(e[7]=[d("忘记密码",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),r("div",X,[t(V,{style:{width:"270px"},type:"success",plain:"",onClick:e[5]||(e[5]=l=>u())},{default:o(()=>[...e[8]||(e[8]=[d("立即登录",-1)])]),_:1})]),t(x,null,{default:o(()=>[...e[9]||(e[9]=[r("span",{style:{"font-size":"13px",color:"grey"}},"没有账号",-1)])]),_:1}),r("div",null,[t(V,{onClick:e[6]||(e[6]=l=>a.$router.push("/register")),style:{width:"270px"},type:"danger",plain:""},{default:o(()=>[...e[10]||(e[10]=[d("立即注册",-1)])]),_:1})]),t(x,null,{default:o(()=>[...e[11]||(e[11]=[r("span",{style:{"font-size":"13px",color:"grey"}},"其他方式",-1)])]),_:1}),r("div",null,[r("div",Z,[r("div",null,[t(m,{href:s(i).MODE==="development"?s(i).VITE_SERVE+"/oauth/gitee/render":s(i).VITE_SERVE+"/api/oauth/gitee/render"},{default:o(()=>[t(v,{name:"gitee",width:"20px",height:"20px",color:"#4E86F1"})]),_:1},8,["href"])]),r("div",ee,[t(m,{href:s(i).MODE==="development"?s(i).VITE_SERVE+"/oauth/github/render":s(i).VITE_SERVE+"/api/oauth/github/render"},{default:o(()=>[t(v,{name:"github",width:"20px",height:"20px",color:"#4E86F1"})]),_:1},8,["href"])])])])])}}});const be=J(te,[["__scopeId","data-v-c99e42fb"]]);export{be as default};
