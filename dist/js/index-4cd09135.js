import{E as m,k as M,e as S,l as I,h as N,m as R,n as T,o as U}from"./element-plus-28eabd23.js";import{_ as j}from"./index-5de9982a.js";import{E as q}from"./md-editor-v3-68fe6554.js";import{C as z}from"./@element-plus-51afdc8f.js";import{g as A,u as H}from"./index-d25c725c.js";import{c as K}from"./@vueuse-9d87eeea.js";import{d as Q,e as p,f as G,al as J,o as v,c as k,a as t,U as n,M as s,a3 as u,u as i,i as w,Q as r,K as O,aj as P,R as X,L as Y}from"./@vue-293b3db8.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import"./dayjs-6997e6a6.js";import"./copy-to-clipboard-55affb02.js";import"./toggle-selection-93f4ad84.js";import"./lodash-es-327b7962.js";import"./async-validator-dee29e8b.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./pinia-b73abff6.js";import"./vue-demi-71ba0ef2.js";import"./axios-b5ee139b.js";import"./nprogress-b52be870.js";import"./vue-router-3c7b10bc.js";import"./@codemirror-b3ba2dcc.js";import"./@lezer-5d82abd9.js";import"./crelt-7bb88e1d.js";import"./@marijn-45184d7f.js";import"./style-mod-ab9c37a6.js";import"./w3c-keyname-9fb136d3.js";import"./@vavt-29aad11c.js";import"./medium-zoom-9a5daf0e.js";import"./markdown-it-467cea12.js";import"./mdurl-d7fdfec3.js";import"./uc.micro-2ff9f57e.js";import"./entities-52510f6e.js";import"./linkify-it-c9428ec8.js";import"./punycode.js-c41da3d1.js";import"./markdown-it-image-figures-6b4113de.js";import"./markdown-it-sub-7f11bbf3.js";import"./markdown-it-sup-e798c984.js";import"./lru-cache-d0d3053b.js";const tt={class:"bg"},et={class:"title"},ot={style:{height:"100%",display:"flex","align-items":"center"}},nt={style:{margin:"0 1rem"}},lt={style:{"margin-top":"1rem",float:"right"}},st={class:"form"},it={class:"card-header"},at={class:"name"},rt={class:"time"},dt={class:"text"},pt={class:"bottom"},mt={class:"count"},ut=Q({__name:"index",setup(ct){const y=K(),d=p(!1),a=p(""),f=p([]);G(()=>{g()});function g(){A().then(l=>{f.value=l.data.map(e=>(e.content=e.content.replace(/[*#>`~\-\\[\]()\s]|(\n\n)/g,""),e.content.length>35&&(e.content=e.content.substring(0,35)+"..."),e))})}const C=()=>{if(a.value===""){m.warning("请输入留言内容");return}H(a.value).then(l=>{l.code===200?(m.success("留言成功"),d.value=!1,g()):m.error(l.msg)})},L=p(["bold","underline","italic","title","strikeThrough","quote","unorderedList","orderedList","task","codeRow","code","link","image","table","pageFullscreen","preview","catalog"]),x=[0,1,"=","scrollSwitch"],h=p(0);function E(l){l.length>2e3&&(l=l.slice(0,2e3),m.warning("字数超过限制，自动截取前2000字")),a.value=l,console.log(a.value),h.value=l.length}return(l,e)=>{const c=M,b=S,V=I,$=N,_=j,B=R,D=T,W=U,F=J("slide-in");return v(),k("div",tt,[e[12]||(e[12]=t("div",{class:"occupancyHeight"},null,-1)),t("div",null,[t("div",et,[e[5]||(e[5]=t("div",null,"留言板",-1)),n(c,{type:"primary",plain:"",onClick:e[0]||(e[0]=o=>d.value=!0)},{default:s(()=>[...e[4]||(e[4]=[u("留言",-1)])]),_:1})]),n(b),e[9]||(e[9]=t("div",{class:"title_content"},[t("span",null,"欢迎访问留言板板块！"),t("span",null,"留言板是一个方便与其他用户交流、分享观点和意见的平台。通过留言板，您可以："),t("span",null,"1、留下自己的留言：无论是对特定主题的讨论、对某篇文章的评论，还是向其他用户提问，您都可以在留言板上发表自己的留言。"),t("span",null,"2、回复其他用户：看到其他用户的留言后，您可以进行回复和互动，分享自己的观点，提供帮助或者表达共鸣。"),t("span",null,"3、进行在线交流：留言板不仅是一个留言的平台，还是一个与其他用户进行实时交流的地方。您可以通过留言板与他人进行私聊，分享更多的讨论和信息。"),t("span",null,"支持：普通文档，markdown")],-1)),t("div",null,[n(V,{size:"45%",modelValue:i(d),"onUpdate:modelValue":e[3]||(e[3]=o=>w(d)?d.value=o:null),direction:"rtl","with-header":!1},{default:s(()=>[t("div",null,[n(i(q),{theme:i(y),style:{height:"90vh"},footers:x,modelValue:i(a),"onUpdate:modelValue":e[1]||(e[1]=o=>w(a)?a.value=o:null),toolbars:i(L),"no-upload-img":"",preview:!1,"on-change":E},{defFooters:s(()=>[t("div",ot,[t("span",nt,"字数："+r(i(h)),1),e[6]||(e[6]=t("span",null,"字数限制：2000",-1))])]),_:1},8,["theme","modelValue","toolbars"]),t("div",lt,[n(c,{type:"primary",onClick:C,plain:""},{default:s(()=>[...e[7]||(e[7]=[u("提交",-1)])]),_:1})]),t("div",{style:{"margin-top":"1rem","margin-right":"1rem",float:"right"},onClick:e[2]||(e[2]=o=>d.value=!1)},[n(c,{type:"warning",plain:""},{default:s(()=>[...e[8]||(e[8]=[u("关闭",-1)])]),_:1})])])]),_:1},8,["modelValue"])])]),t("div",null,[e[11]||(e[11]=t("div",{class:"title"},"留言列表",-1)),t("div",st,[(v(!0),k(O,null,P(i(f),o=>X((v(),Y(W,{class:"box-card",shadow:"hover"},{header:s(()=>[t("div",it,[t("span",null,[n($,{src:o.avatar},null,8,["src"])]),t("span",at,r(o.nickname),1),t("span",rt,r(o.createTime),1)])]),default:s(()=>[t("div",dt,r(o.content),1),t("div",pt,[t("div",mt,[t("div",null,[n(_,{name:"comments"}),t("span",null,r(o.commentCount),1)]),t("div",null,[n(_,{name:"like"}),t("span",null,r(o.likeCount),1)]),t("div",null,[n(_,{name:"collection"}),t("span",null,r(o.favoriteCount),1)])]),t("div",null,[n(D,{type:"primary",onClick:_t=>l.$router.push(`/message/detail/${o.id}`)},{icon:s(()=>[n(B,null,{default:s(()=>[n(i(z))]),_:1})]),default:s(()=>[e[10]||(e[10]=u(" 查看详情 ",-1))]),_:2},1032,["onClick"])])])]),_:2},1024)),[[F]])),256))])])])}}});const Zt=Z(ut,[["__scopeId","data-v-1a17c99e"]]);export{Zt as default};
