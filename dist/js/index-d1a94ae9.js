import{k as pe,l as ge,E as g,j as fe,e as he,f as ye,t as Ee,n as Ce,u as ke}from"./element-plus-28eabd23.js";import{t as Ie,a as xe,_ as Te}from"./index-4dcf9599.js";import{_ as $e}from"./index-167a1727.js";import{a as be,_ as we,b as Ae,c as Ne}from"./index-f7e21533.js";import{a as Se,i as Be,d as Ve,b as Re,c as Me,u as De,_ as Fe}from"./index-c027236e.js";import{_ as U,u as Le,a as Oe,r as Ue,c as He}from"./index-5de9982a.js";import{_ as ze}from"./index-375f0060.js";import{d as H,al as Pe,R as _,o as d,c,a as e,U as l,u as r,l as je,M as a,i as qe,J as w,e as x,w as Ye,f as We,S as v,E as Q,Q as s,K as S,aj as D,a3 as f,L as Ke}from"./@vue-293b3db8.js";import{a as Z,M as X}from"./md-editor-v3-68fe6554.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import{c as Je,d as Qe}from"./@vueuse-9d87eeea.js";import{a as Xe}from"./@element-plus-51afdc8f.js";import{u as Ge}from"./vue-router-3c7b10bc.js";import"./dayjs-6997e6a6.js";import"./copy-to-clipboard-55affb02.js";import"./toggle-selection-93f4ad84.js";import"./lodash-es-327b7962.js";import"./async-validator-dee29e8b.js";import"./@ctrl-f8748455.js";import"./@popperjs-c75af06c.js";import"./screenfull-b3e6dc1f.js";import"./index-f98d026c.js";import"./pinia-b73abff6.js";import"./vue-demi-71ba0ef2.js";import"./axios-b5ee139b.js";import"./nprogress-b52be870.js";import"./@codemirror-b3ba2dcc.js";import"./@lezer-5d82abd9.js";import"./crelt-7bb88e1d.js";import"./@marijn-45184d7f.js";import"./style-mod-ab9c37a6.js";import"./w3c-keyname-9fb136d3.js";import"./@vavt-29aad11c.js";import"./medium-zoom-9a5daf0e.js";import"./markdown-it-467cea12.js";import"./mdurl-d7fdfec3.js";import"./uc.micro-2ff9f57e.js";import"./entities-52510f6e.js";import"./linkify-it-c9428ec8.js";import"./punycode.js-c41da3d1.js";import"./markdown-it-image-figures-6b4113de.js";import"./markdown-it-sub-7f11bbf3.js";import"./markdown-it-sup-e798c984.js";import"./lru-cache-d0d3053b.js";const Ze={class:"card px-[10px]"},et={class:"title"},tt={class:"title_text"},ot={class:"min-h-[16em] max-h-[40em] overflow-y-auto"},lt="preview-only",nt=H({__name:"index",setup(F){const y=document.documentElement;return(E,T)=>{const $=U,C=Pe("slide-in");return _((d(),c("div",Ze,[e("div",et,[e("div",tt,[l($,{class:"scale",name:"directory",width:"30",height:"30"}),T[0]||(T[0]=e("span",{style:{"margin-left":"10px"}},"目录",-1))])]),e("div",ot,[l(r(Z),{editorId:lt,scrollElement:r(y)},null,8,["scrollElement"])])])),[[C]])}}});const st=z(nt,[["__scopeId","data-v-8a4a5e13"]]),it={key:0},at={class:"move_catalog"},rt=H({__name:"index",props:{id:{},scrollElement:{},isShowMoveCatalog:{type:Boolean}},emits:["update:isShowMoveCatalog"],setup(F,{emit:y}){const E=F,T=y,$=je(()=>E.isShowMoveCatalog),C=()=>{T("update:isShowMoveCatalog",!1)};return(o,u)=>{const B=pe,A=ge;return o.scrollElement?(d(),c("div",it,[l(A,{modelValue:r($),"onUpdate:modelValue":u[1]||(u[1]=N=>qe($)?$.value=N:null),"with-header":!0,size:"60%",direction:"rtl","show-close":!1,"before-close":C},{header:a(()=>[u[2]||(u[2]=e("span",{style:{"font-size":"1.2rem"}},"目录",-1)),l(B,{icon:r(Xe),style:{background:"none","font-size":"1.5rem",width:"30px",border:"none"},onClick:u[0]||(u[0]=N=>C())},null,8,["icon"])]),default:a(()=>[e("div",at,[l(r(Z),{editorId:E.id,scrollElement:E.scrollElement},null,8,["editorId","scrollElement"])])]),_:1},8,["modelValue"])])):w("",!0)}}});const dt=z(rt,[["__scopeId","data-v-c6ee1e5f"]]),G="article_visit_",ut={class:"p-1"},ct={class:"head_title_text"},mt={class:"classify"},_t={class:"tag"},vt={class:"title"},pt={class:"statistics"},gt={class:"statistics"},ft={class:"time"},ht={style:{display:"flex","align-items":"center"}},yt={class:"copyright"},Et={class:"author"},Ct={class:"link"},kt=["href"],It={class:"license"},xt={style:{display:"flex","justify-content":"space-between"}},Tt={class:"tag"},$t=["onClick"],bt={class:"like"},wt={class:"tag",style:{display:"flex","justify-content":"left"}},At={class:"tipping"},Nt={class:"qrCode"},St={class:"goOn"},Bt={key:0},Vt={key:0},Rt={class:"pre-text"},Mt={class:"sticky_layout"},Dt={class:"mt-[2.5em]"},Ft={key:0},Lt={class:"bg-white dark:bg-gray-800"},Ot={class:"sm:px-1 md:px-[5rem] lg:px-[10rem] xl:px-[15rem] py-3",style:{transition:"all .5s ease"}},Ut={class:"head_title_text"},Ht={class:"classify"},zt={class:"tag"},Pt={class:"title"},jt={class:"statistics"},qt={class:"statistics"},Yt={class:"time"},Wt={style:{display:"flex","align-items":"center"}},Kt={class:"copyright"},Jt={class:"author"},Qt={class:"link"},Xt=["href"],Gt={class:"license"},Zt={style:{display:"flex","justify-content":"space-between"}},eo={class:"tag"},to=["onClick"],oo={class:"like"},lo={class:"tag",style:{display:"flex","justify-content":"left"}},no={class:"tipping"},so={class:"qrCode"},io={class:"goOn"},ao={key:0},ro={key:0},O="preview-only",uo=H({__name:"index",setup(F){const y={VITE_APP_BASE_API:"/api",VITE_SERVE:"",VITE_FRONTEND_URL:"",VITE_MUSIC_BASE_API:"/wapi",VITE_MUSIC_SERVE:"",VITE_MUSIC_FRONTEND_URL:"",VITE_YIYAN_API:"",VITE_ENABLE_DEV_TOOLSBLOCKER:"true",VITE_USER_NODE_ENV:"production",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},E=Le(),T=Je(),$=document.documentElement,C=x(!1),o=x({articleCover:"",articleTitle:"",articleContent:void 0,categoryName:"",categoryId:"",tags:[],visitCount:0,commentCount:0,likeCount:0,favoriteCount:0,createTime:"",updateTime:"",userId:0,id:"0"}),u=Ge(),B=x(!1),A=x(0);Ye(()=>u.params.id,()=>{N()}),We(async()=>{await N()});async function N(){Oe(u.params.id).then(n=>{if(!n.data){g.warning({message:"文章不存在"}),Ue.push({path:"/"});return}Qe(n.data.articleTitle),u.params.id&&(sessionStorage.getItem(G+u.params.id)||(sessionStorage.setItem(G+u.params.id,u.params.id),He(u.params.id))),n.data.createTime=n.data.createTime.split(" ")[0],n.data.updateTime=n.data.updateTime.split(" ")[0],o.value=n.data,B.value=!0,oe(),le()})}function P(n){const t=n.replace(/<[^>]+>/g,"").replace(/[\r\n]/g,"").replace(/[ ]/g,"").replace(/[\s+\.\!\/_,$%^*(+\"\']+|[+——！，。？、~@#￥%……&*（）]+/g,"");A.value=ee(t.length)}function ee(n){if(n<=1e3)return n;{let t=n/1e3;return t=Number(t.toFixed(1)),t+"k"}}const j=async()=>{try{const n=`欢迎访问博客文章：${o.value.articleTitle} 
通往地址：${y.VITE_FRONTEND_URL}${u.path}`;await navigator.clipboard.writeText(n),g.success("已复制分享链接")}catch{g.error("复制失败，请联系网站管理员")}};function te(){var n;fe.alert(`<pre>${(n=E.webInfo)==null?void 0:n.sidebarAnnouncement}</pre>`,"公告",{confirmButtonText:"关闭",closeOnPressEscape:!0,dangerouslyUseHTMLString:!0})}const k=x(!1),I=x(!1),q=n=>{k.value?Ve(1,o.value.id).then(t=>{t.code===200?(n.favoriteCount-=1,k.value=!1,g.info("取消收藏")):g.error(t.msg)}):Re(1,o.value.id).then(t=>{t.code===200?(n.favoriteCount+=1,k.value=!0,g.success("收藏成功")):g.error(t.msg)})};function Y(n){I.value?Me(1,o.value.id).then(t=>{t.code===200?(n.likeCount-=1,I.value=!1,g.info("我会继续努力的")):g.error(t.msg)}):De(1,o.value.id).then(t=>{t.code===200?(n.likeCount+=1,I.value=!0,g.success("感谢你的认可")):g.error(t.msg)})}function oe(){Se(1,o.value.id).then(n=>{k.value=n.data===!0})}function le(){Be(1,o.value.id).then(n=>{I.value=n.code===200})}window.addEventListener("scroll",Ie(()=>{window.requestAnimationFrame(ne)},40));const W=x("0%");function ne(){let n=document.documentElement.scrollHeight||document.body.scrollHeight,t=document.documentElement.clientHeight||document.body.clientHeight,V=n-t,m=document.documentElement.scrollTop||document.body.scrollTop,R=document.querySelector(".progress");R.style.width=m/V*100+"%",W.value=Math.floor(m/V*100)+"%"}const b=x(!1);function se(){b.value=!b.value}return(n,t)=>{var J;const V=ze,m=U,R=he,h=U,K=ye,L=Ee,M=Ce,ie=Fe,ae=be,re=we,de=Ae,ue=Ne,ce=xe,me=$e,_e=Te,ve=ke;return d(),c(S,null,[_(e("div",null,[l(me,{"is-side-bar":""},{header:a(()=>[l(V)]),content:a(()=>{var i;return[t[20]||(t[20]=e("div",{class:"progress"},null,-1)),e("div",ut,[e("div",{class:"head_title",style:Q(`background-image: url('${o.value.articleCover}')`)},[e("div",ct,[e("div",mt,[e("div",null,s(o.value.categoryName),1),(d(!0),c(S,null,D(o.value.tags,p=>(d(),c("div",_t,"# "+s(p.tagName),1))),256))]),e("div",vt,s(o.value.articleTitle),1),e("div",pt,[e("div",null,"字数统计:"+s(A.value),1)]),e("div",gt,[e("div",null,"访问量:"+s(o.value.visitCount),1),e("div",null,"评论数:"+s(o.value.commentCount),1),e("div",null,"点赞量:"+s(o.value.likeCount),1),e("div",null,"收藏量:"+s(o.value.favoriteCount),1)]),e("div",ft,[e("div",null,"发布："+s(o.value.createTime),1),e("div",null,"更新："+s(o.value.updateTime),1)])])],4),e("div",null,[e("div",null,[l(r(X),{editorId:O,theme:r(T),modelValue:o.value.articleContent,"on-html-changed":P},null,8,["theme","modelValue"])]),l(R,{"border-style":"dashed","content-position":"left"},{default:a(()=>[e("div",ht,[l(m,{name:"author_statement"}),t[13]||(t[13]=e("span",{style:{"margin-left":"0.5em"}},"声明",-1))])]),_:1}),e("div",yt,[e("div",Et,[l(m,{name:"article_author"}),e("strong",null,"本文作者： "+s((i=r(E).webInfo)==null?void 0:i.webmasterName),1)]),e("div",Ct,[l(m,{name:"author_link"}),t[14]||(t[14]=e("strong",null,"本文链接： ",-1)),e("a",{class:"copyright_a",href:r(y).VITE_FRONTEND_URL+n.$route.path},s(r(y).VITE_FRONTEND_URL+n.$route.path),9,kt)]),e("div",It,[e("div",null,[l(m,{name:"author_copyright"}),t[15]||(t[15]=e("strong",null,"版权声明： ",-1))]),t[16]||(t[16]=e("div",{class:"license_text"},[f(" 本站所有文章除特别声明外，均采用   "),e("a",{class:"copyright_a",href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh",target:"_blank"}," CC BY-NC-SA 4.0 "),f("   许可协议。转载请注明文章出处！ ")],-1))])])]),e("div",xt,[e("div",Tt,[(d(!0),c(S,null,D(o.value.tags,p=>(d(),c("div",{key:p.id,onClick:co=>n.$router.push(`/tags/${p.id}`)},"# "+s(p.tagName),9,$t))),128))]),e("div",bt,[e("div",{onClick:t[0]||(t[0]=p=>Y(o.value))},[_(l(h,{name:"like"},null,512),[[v,!I.value]]),_(l(h,{name:"like-selected"},null,512),[[v,I.value]]),e("span",null,s(o.value.likeCount),1)]),e("div",{onClick:t[1]||(t[1]=p=>q(o.value))},[_(l(h,{name:"collection"},null,512),[[v,!k.value]]),_(l(h,{name:"collection-selected"},null,512),[[v,k.value]]),e("span",null,s(o.value.favoriteCount),1)]),e("div",{onClick:j},[l(h,{name:"share"}),t[17]||(t[17]=e("span",null,"分享",-1))])])]),e("div",null,[e("div",wt,[e("div",{onClick:t[2]||(t[2]=p=>n.$router.push(`/category/${o.value.categoryId}`))},s(o.value.categoryName),1)])]),e("div",At,[l(L,{class:"box-item",effect:"light",placement:"top"},{content:a(()=>[e("div",Nt,[e("div",null,[t[18]||(t[18]=f(" 支付宝 ",-1)),l(K,{src:"https://image.kuailemao.xyz/blog/pay/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98%E4%BA%8C%E7%BB%B4%E7%A0%81_.png"})])])]),default:a(()=>[e("div",null,[l(m,{name:"gift"}),t[19]||(t[19]=e("span",{class:"max-[540px]:hidden"},"ヾ(≧▽≦*)o！",-1))])]),_:1})]),e("div",St,[e("div",null,[o.value.preArticleId>0?(d(),c("div",Bt,[l(M,{onClick:t[3]||(t[3]=p=>n.$router.push(`/article/${o.value.preArticleId}`))},{default:a(()=>[f(" 上一篇："+s(o.value.preArticleTitle),1)]),_:1})])):w("",!0)]),e("div",null,[o.value.nextArticleId>0?(d(),c("div",Vt,[l(M,{onClick:t[4]||(t[4]=p=>n.$router.push(`/article/${o.value.nextArticleId}`))},{default:a(()=>[f(" 下一篇："+s(o.value.nextArticleTitle),1)]),_:1})])):w("",!0)])]),B.value?(d(),Ke(ie,{key:0,type:1,"like-type":2,"author-id":o.value.userId,"type-id":o.value.id},null,8,["author-id","type-id"])):w("",!0)])]}),information:a(()=>[l(ae),l(re,{title:"公告",prefixIcon:"announcement","suffix-icon":"jt_y",isDithering:!0,isArrow:!0,onInvoke:te},{default:a(()=>{var i;return[e("pre",Rt,""+s((i=r(E).webInfo)==null?void 0:i.sidebarAnnouncement)+`
        `,1)]}),_:1}),l(de),e("div",Mt,[e("div",Dt,[l(st)]),o.value.categoryId!==""?(d(),c("div",Ft,[l(ue,{categoryId:o.value.categoryId.toString(),articleId:r(u).params.id,title:"相关推荐","prefix-icon":"query_tasks"},null,8,["categoryId","articleId"])])):w("",!0)])]),footer:a(()=>[l(ce)]),_:1})],512),[[v,!b.value]]),_(e("div",Lt,[e("div",{onClick:t[5]||(t[5]=i=>b.value=!1),class:"z-10 w-[50px] h-[50px] bg-gray-200 hover:bg-gray-300 fixed top-[2em] right-[1em] lg:right-[5em] rounded flex items-center justify-center duration-300 cursor-pointer"},[l(m,{name:"exit_icon",style:{width:"25px",height:"25px"}})]),e("div",Ot,[e("div",{class:"head_title",style:Q(`background-image: url('${o.value.articleCover}')`)},[e("div",Ut,[e("div",Ht,[e("div",null,s(o.value.categoryName),1),(d(!0),c(S,null,D(o.value.tags,i=>(d(),c("div",zt,"# "+s(i.tagName),1))),256))]),e("div",Pt,s(o.value.articleTitle),1),e("div",jt,[e("div",null,"字数统计:"+s(A.value),1)]),e("div",qt,[e("div",null,"访问量:"+s(o.value.visitCount),1),e("div",null,"评论数:"+s(o.value.commentCount),1),e("div",null,"点赞量:"+s(o.value.likeCount),1),e("div",null,"收藏量:"+s(o.value.favoriteCount),1)]),e("div",Yt,[e("div",null,"发布："+s(o.value.createTime),1),e("div",null,"更新："+s(o.value.updateTime),1)])])],4),e("div",null,[e("div",null,[l(r(X),{editorId:O,theme:r(T),modelValue:o.value.articleContent,"on-html-changed":P},null,8,["theme","modelValue"])]),l(R,{"border-style":"dashed","content-position":"left"},{default:a(()=>[e("div",Wt,[l(m,{name:"author_statement"}),t[21]||(t[21]=e("span",{style:{"margin-left":"0.5em"}},"声明",-1))])]),_:1}),e("div",Kt,[e("div",Jt,[l(m,{name:"article_author"}),e("strong",null,"本文作者： "+s((J=r(E).webInfo)==null?void 0:J.webmasterName),1)]),e("div",Qt,[l(m,{name:"author_link"}),t[22]||(t[22]=e("strong",null,"本文链接： ",-1)),e("a",{class:"copyright_a",href:r(y).VITE_FRONTEND_URL+n.$route.path},s(r(y).VITE_FRONTEND_URL+n.$route.path),9,Xt)]),e("div",Gt,[e("div",null,[l(m,{name:"author_copyright"}),t[23]||(t[23]=e("strong",null,"版权声明： ",-1))]),t[24]||(t[24]=e("div",{class:"license_text"},[f(" 本站所有文章除特别声明外，均采用   "),e("a",{class:"copyright_a",href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh",target:"_blank"}," CC BY-NC-SA 4.0 "),f("   许可协议。转载请注明文章出处！ ")],-1))])])]),e("div",Zt,[e("div",eo,[(d(!0),c(S,null,D(o.value.tags,i=>(d(),c("div",{key:i.id,onClick:p=>n.$router.push(`/tags/${i.id}`)},"# "+s(i.tagName),9,to))),128))]),e("div",oo,[e("div",{onClick:t[6]||(t[6]=i=>Y(o.value))},[_(l(h,{name:"like"},null,512),[[v,!I.value]]),_(l(h,{name:"like-selected"},null,512),[[v,I.value]]),e("span",null,s(o.value.likeCount),1)]),e("div",{onClick:t[7]||(t[7]=i=>q(o.value))},[_(l(h,{name:"collection"},null,512),[[v,!k.value]]),_(l(h,{name:"collection-selected"},null,512),[[v,k.value]]),e("span",null,s(o.value.favoriteCount),1)]),e("div",{onClick:j},[l(h,{name:"share"}),t[25]||(t[25]=e("span",null,"分享",-1))])])]),e("div",null,[e("div",lo,[e("div",{onClick:t[8]||(t[8]=i=>n.$router.push(`/category/${o.value.categoryId}`))},s(o.value.categoryName),1)])]),e("div",no,[l(L,{class:"box-item",effect:"light",placement:"top"},{content:a(()=>[e("div",so,[e("div",null,[t[26]||(t[26]=f(" 支付宝 ",-1)),l(K,{src:"https://image.kuailemao.xyz/blog/pay/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98%E4%BA%8C%E7%BB%B4%E7%A0%81_.png"})])])]),default:a(()=>[e("div",null,[l(m,{name:"gift"}),t[27]||(t[27]=e("span",{class:"max-[540px]:hidden"},"ヾ(≧▽≦*)o！",-1))])]),_:1})]),e("div",io,[e("div",null,[o.value.preArticleId>0?(d(),c("div",ao,[l(M,{onClick:t[9]||(t[9]=i=>n.$router.push(`/article/${o.value.preArticleId}`))},{default:a(()=>[f(" 上一篇："+s(o.value.preArticleTitle),1)]),_:1})])):w("",!0)]),e("div",null,[o.value.nextArticleId>0?(d(),c("div",ro,[l(M,{onClick:t[10]||(t[10]=i=>n.$router.push(`/article/${o.value.nextArticleId}`))},{default:a(()=>[f(" 下一篇："+s(o.value.nextArticleTitle),1)]),_:1})])):w("",!0)])])])],512),[[v,b.value]]),l(dt,{id:O,"scroll-element":r($),"is-show-move-catalog":C.value,"onUpdate:isShowMoveCatalog":t[11]||(t[11]=i=>C.value=i)},null,8,["scroll-element","is-show-move-catalog"]),_(l(_e,{"to-top":"","scroll-percentage":"","reading-mode":"","to-comment":"",onReadingMode:se},{scroll_percentage:a(()=>[f(s(W.value),1)]),_:1},512),[[v,!b.value]]),_(e("div",null,[l(ve,{position:"bottom",offset:200},{default:a(()=>[l(L,{effect:"light",content:"显示目录",placement:"right"},{default:a(()=>[e("div",{class:"move_catalog_btn",onClick:t[12]||(t[12]=i=>C.value=!0)},[l(m,{name:"directory",class:"move_catalog_svg",width:"30",height:"30"})])]),_:1})]),_:1})],512),[[v,!b.value]])],64)}}});const ol=z(uo,[["__scopeId","data-v-bbd19c05"]]);export{ol as default};
